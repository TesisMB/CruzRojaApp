<ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button type="button" defaultHref='tabs/chat'></ion-back-button>
      </ion-buttons>
    </ion-toolbar>
</ion-header>

<!-- <div class="header ion-no-border">
  <div class="info">
    <ion-buttons slot="start">
      <ion-back-button type="button" defaultHref="chat"></ion-back-button>
    </ion-buttons>
    <ion-avatar id="emergencyIcon">
      <img src="../../../assets/icons - Chat/{{chat.emergenciesDisasters.typesEmergenciesDisasters.typeEmergencyDisasterIcon}}.svg" alt="">
    </ion-avatar>
    <span class="details">
        <h1>{{chat.emergenciesDisasters.typeEmergencyDisasterName}}</h1>
    </span>
  </div>
</div> -->


<!-- <ion-fab>
  <ion-fab-button (click)="leaveGroup()">
      <ion-avatar>
        <ion-icon name="caret-back-circle-outline"></ion-icon>
      </ion-avatar>
  </ion-fab-button>
</ion-fab> -->


<!-- Mensajes -->

<ion-content [scrollEvents]="true" (ionScroll)="handleScroll($event)">
  <!-- botÃ³n para volver al final del chat -->
    <button id="fab-button" (click)="scrollToBottom()">
      <ion-icon id="scrollBackIcon" name="chevron-down-outline"></ion-icon>
    </button>

  <ion-row>
    <ion-col [offset]="(item.fK_UserID === currentUser.userID) ? '3' : '0'" size="9" *ngFor="let item of msj" class= "message" [ngClass]="(item.fK_UserID === currentUser.userID) ? 'my-message' : 'other-message'">
        <span id="userName">{{item.name}}</span>
      <div>
        <span id="message">{{item.message}}</span>
      </div>
      <div class="time">
        <span>{{item.createdDate | date : 'short'}}</span>
      </div>
    </ion-col>
  </ion-row>
</ion-content>

<!-- Input -->

<ion-footer style="background-color: #fff;">
  <form [formGroup]="chatForm" (ngSubmit)="postChat()" footer-input >
    <ion-label class="item-input-wrapper">
      <!--  <input type="text" placeholder="Usuario" id="user"
      (change)="value()" /> -->

      <textarea autosize maxRows="3" type="text"formControlName="message" name="message" placeholder="Enviar mensaje..." id="chat-input"></textarea>

      <button type="submit" class="btnSend" [disabled]="chatForm.get('message').invalid">
        <ion-icon id="btnIcon" name="send-sharp"></ion-icon>
      </button>
    </ion-label>
  </form>
</ion-footer>
