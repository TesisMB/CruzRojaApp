<app-header titulo="Alertas">

</app-header>

<!-- Vista de Alertas mejorado -->

<ion-content>

    <ion-toolbar>
      <ion-segment (ionChange)="segmentChanged($event)" color="danger" value="new">
        <ion-segment-button value="new">
          <ion-label>Nuevas alertas</ion-label>
        </ion-segment-button>
        <ion-segment-button value="old">
          <ion-label>Mis alertas</ion-label>
        </ion-segment-button>
      </ion-segment>
  </ion-toolbar>
  <ng-container *ngIf="alerts.length; else noData">
    <div *ngIf="isLoading" class="d-flex flex-column align-items-center align-content-center m-5">
      <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
    </div>

  <ion-list *ngIf="!isLoading" lines="inset" mode="md">
    
    <ion-item *ngFor="let alert of alerts; index as i" mode="md" button="true" detail="true" (click)="deploymentButton(i)">
      <ion-thumbnail slot="start" [ngStyle]="{
        backgroundColor: getColor(alert.alerts.alertDegree)
      }" [ngClass]="{
        'circulo': alert.alerts.alertDegree === 'Moderado',
        'triangulo': alert.alerts.alertDegree === 'Controlado',
        'cuadrado': alert.alerts.alertDegree === 'Urgente'}"
      >
        <ion-img src="../../../assets/icons - Resources - EmergDesas/{{alert.typesEmergenciesDisasters.typeEmergencyDisasterIcon}}.svg"></ion-img>
      </ion-thumbnail>
      <ion-label>
        <h3 ><strong>{{alert.alerts.alertDegree}}</strong></h3>
        <h4  class="mt-2">#{{alert.emergencyDisasterID}} &nbsp; {{alert.typesEmergenciesDisasters.typeEmergencyDisasterName}}</h4>
        <p class="mt-2">{{alert.locationsEmergenciesDisasters.locationCityName}}</p>
      </ion-label>
    </ion-item>
    

  </ion-list>
</ng-container> 

<ng-template #noData>
      <div class="d-flex flex-column align-items-center align-content-center m-5">
      <img src="https://blush.design/api/download?shareUri=hlIniFJKcV8E0KWj&c=Skin_0%7Eff9ba5&w=800&h=800&fm=png" style="height: 250px;" alt="">
     <p class="text-center mt-3">No se han emitido alerta!</p>
    </div>
    </ng-template>
</ion-content>



  <!--     <ion-card  *ngFor="let alert of alerts; index as i">
       <ion-label color="dark"><h5 class="subtitle">ID: {{alert.emergencyDisasterID}}</h5></ion-label>
      <ion-card-content >
        <ion-grid fixed="true">
          <ion-row>
            <ion-col size="4">
                  <ion-avatar slot="start" [ngStyle]="{
                    backgroundColor: getColor(alert.alerts.alertDegree)
                  }">
                    <img
                    src="../../../assets/icons - Resources - EmergDesas/{{alert.typesEmergenciesDisasters.typeEmergencyDisasterIcon}}.svg"/>
                </ion-avatar>
              </ion-col>
            <ion-col size="8">
            <ion-label>
                  <h4 >{{alert.typesEmergenciesDisasters.typeEmergencyDisasterName}}</h4>
                  <h3 >ID: #{{alert.emergencyDisasterID}}</h3>
                  <p class="mt-2">{{alert.locationsEmergenciesDisasters.locationCityName}}</p>
                </ion-label>
              </ion-col>
              </ion-row>
              </ion-grid>
      </ion-card-content>
    </ion-card>
 -->

<!-- Viejo  -->

<!-- <ion-col  *ngFor="let alert of alerts; index as i" size="6"  [ngClass]="{
  'circulo': alert.alerts.alertDegree === 'Moderado',
  'triangulo': alert.alerts.alertDegree === 'Controlado',
  'cuadrado': alert.alerts.alertDegree === 'Urgente'}"
[ngStyle]="{
  backgroundColor: getColor(alert.alerts.alertDegree)
}"
 > 
  <div >
  <img id="emergencyIcon"
  src="../../../assets/icons - Resources - EmergDesas/{{alert.typesEmergenciesDisasters.typeEmergencyDisasterIcon}}.svg" (click)="deploymentButton(i)"/>
  <div class="card-content">
    <h3 class="subtitle">ID: {{alert.emergencyDisasterID}}</h3>
  </div>
 
  </div>
</ion-col> -->